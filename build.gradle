apply plugin: 'java'
apply plugin: 'eclipse'

repositories {
    mavenCentral()
}

dependencies {
	
	compile group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '2.53.0'
	compile group: 'org.testng', name: 'testng', version: '6.10'
 	
}

sourceSets {
    main {
        java {
            srcDir 'src'
        }
        resources {
            srcDir 'resources'
        }
    }
}

repositories {
    mavenCentral()
    maven {
        url './maven-repo'
    }
}

task run(type: Test) {
    useTestNG() {
    	final suite = System.getProperty('suite')
        if (suite) {
            final suites = suite.split(',') as Set
            println "Specified suites : $suites"
            suiteXmlFiles = suites.collect {new File(it)}.findAll {it.exists()}
            println "Suites to be executed : $suiteXmlFiles"
        }
        ignoreFailures = false
    }
    systemProperties = System.getProperties() as Map<String, ?>
    testClassesDir = sourceSets.main.output.classesDir
    classpath = sourceSets.main.runtimeClasspath
    outputs.upToDateWhen { false }
    testLogging.showStandardStreams = true
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.1'
}